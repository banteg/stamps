-inherit base.html

-def select(one, many)
  label =one
  select.pure-input-1 ng-model='filters.${one}' ng-change='reset_search()' ng-options='${one} for ${one} in ${many}'


-block content
  div ng-controller='SearchCtrl'
    .pure.g

      / header
      .pure-u-1-5
        .cell
          h1 explore
      .pure-u-4-5
        .cell
          h1 ng-show='busy'
            | searchingâ€¦
          h1 ng-hide='busy'
            | found {{ results.count }} stamps

      / filters
      .pure-u-1-5
        form class='pure-form pure-form-stacked'
          fieldset
            .pure-u-1
              .cell
                =select('country', 'countries')
                =select('theme', 'themes')
                =select('year', 'years')

      / results
      .pure-u-4-5
        .pure-g when-scrolled='next_page()'
          .pure-u-1-3.gap-2 ng-repeat='stamp in stamps'
            .cell
              stamp stamp='stamp'
          .pure-u-1 ng-show='busy && filters.skip > 0'
            .cell
              h1 {{ results.count - filters.skip }} to go
